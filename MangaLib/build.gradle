logger.info ' >> MangaLib'

description = 'The central library for this application containing all general implementations of the downloader.'

dependencies {
	// utilities
	compile 'com.google.guava:guava:19.0'
	compile 'org.glassfish:javax.json:1.0.4'
	
	// IO
	compile 'org.jsoup:jsoup:1.10.1'
	compile 'org.apache.httpcomponents:httpclient:4.5.2'
	
	// embed jetty
	compile 'org.eclipse.jetty:jetty-server:9.2.19.v20160908'
	compile 'org.eclipse.jetty:jetty-servlet:9.2.19.v20160908'
    
	// javafx, needs to be added for java 7 only
	if(JavaVersion.current() == JavaVersion.VERSION_1_7) {
		compile files(System.properties.'java.home' + '/lib/jfxrt.jar')
	}
	compile files(new File(rootProject.projectDir, 'lib/jmetro.jar'))
}

pmdMain.ignoreFailures = true
pmdMain << {
	assertPmdErrors pmdMain, [
		[clazz:'de.herrlock.manga.http.jetty.JettyServer', method: 'start', rule:'AvoidCatchingGenericException'],
		[clazz:'de.herrlock.manga.http.jetty.JettyServer', method: 'stop', rule:'AvoidCatchingGenericException'],
		[clazz:'de.herrlock.manga.jd.Crawljob', method: 'export', rule:'InsufficientStringBufferDeclaration']
	]
}
