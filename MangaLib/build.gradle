logger.info ' >> MangaLib'

description = 'The central library for this application containing all general implementations of the downloader.'

dependencies {
	// utilities
	compile 'com.google.guava:guava:20.0'
	compile 'org.glassfish:javax.json:1.0.4'
	
	// IO
	compile 'org.jsoup:jsoup:1.10.2'
	compile 'org.apache.httpcomponents:httpclient:4.5.3'
	
	// embed jetty
	compile 'org.eclipse.jetty:jetty-server:9.2.21.v20170120'
	compile 'org.eclipse.jetty:jetty-security:9.2.21.v20170120'
	
	// compressing and archiving files
	compile 'org.apache.commons:commons-compress:1.14'
	
	// ServiceLoader-annotations
	compileOnly 'com.google.auto.service:auto-service:1.0-rc3'
	
	// javafx
	file(System.properties.'java.home').eachFileRecurse(groovy.io.FileType.FILES) {
		if('jfxrt.jar'.equals(it.name)) {
			compile files(it)
		}
	}
	
	compile files(new File(rootProject.projectDir, 'lib/jmetro.jar'))
}

pmdMain.ignoreFailures = true
pmdMain << {
	assertPmdErrors pmdMain, [
		[clazz:'de.herrlock.manga.http.jetty.JettyServer', method: 'start', rule:'AvoidCatchingGenericException'],
		[clazz:'de.herrlock.manga.http.jetty.JettyServer', method: 'stop', rule:'AvoidCatchingGenericException'],
		[clazz:'de.herrlock.manga.jd.Crawljob', method: 'export', rule:'InsufficientStringBufferDeclaration']
	]
}
